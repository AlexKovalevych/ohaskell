----
title: Про hlint
prevChapter: /ru/miscellaneous/about-formatting.html
nextChapter: /ru/integration/index.html
----

Haskell, как и другие языки программирования, достаточно гибок в синтаксисе, поэтому многие конструкции мы можем записать по-разному. И есть одна утилита, которая поможет нам сделать правильный выбор. Речь пойдёт о `hlint`.

Эта утилита живёт в [Hackage](http://hackage.haskell.org/package/hlint), поэтому устанавливаем её мы точно так же, как и остальные пакеты:

```bash
$ stack install hlint
```

Немного терпения — и готово. Там будет много текста, сообщающего вам о процессе сборки утилиты, а в конце вы увидите строку наподобие этой:

```bash
The executable file has been installed at
/Users/dshevchenko/Library/Haskell/ghc-7.6.3/lib/hlint-1.8.57/bin/hlint
```

Для удобства сделаем ссылку:

```bash
$ ln -s /Users/dshevchenko/Library/Haskell/ghc-7.6.3/lib/hlint-1.8.57/bin/hlint /usr/local/bin/hlint
```

## Что нам с ней делать

Утилита `hlint` — наш верный консультант. Она анализирует исходный код наших файлов и говорит: «Да, неплохо, но почему бы вам не улучшить свой код и не написать вот так?»

Пусть в нашем `Main.hs` находится такой код:

```haskell
main :: IO ()
main = putStrLn $ (show 19) ++ (show 81)
```

Теперь спросим совета у `hlint`. Для этого перейдём в корень проекта и выполним:
 
```bash
$ hlint src/Main.hs
```

И вот что скажет нам наш консультант:

```bash
src/Main.hs:88:19: Warning: Redundant bracket
Found:
  (show 19) ++ (show 81)
Why not:
  show 19 ++ (show 81)

src/Main.hs:88:19: Warning: Redundant bracket
Found:
  (show 19) ++ (show 81)
Why not:
  (show 19) ++ show 81

2 suggestions
```

Перед нами два предложения по улучшению нашего кода. Объяснение предельно понятное: Redundant bracket. И действительно, круглые скобки вокруг вызовов `show` совершенно не нужны. Последуем доброму совету и уберём их:

```haskell
main :: IO ()
main = putStrLn $ show 19 ++ show 81
```

И если вновь cпросить совета у hlint, ответ будет таким:

```bash
No suggestions
```

Больше рекомендаций нет.

## Рекурсивно

В вашем реальном проекте, где будет много файлов, удобнее использовать рекурсивный прогон `hlint` по всему проекту. Для этого просто укажите путь к каталогу с исходниками:

```bash
$ hlint src/
```

## Предупреждения и ошибки

Если внимательно проанализировать советы, выдаваемые `hlint`, можно увидеть тип каждой из рекомендаций. Некоторые идут как предупреждения:

```bash
src/Main.hs:88:19: Warning: Redundant bracket
```

в то время как другие идут уже как ошибка:

```bash
src/Utils/Files.hs:10:1: Error: Redundant lambda
```

Нет, это не ошибка синтаксиса. Код прекрасно скомпилируется и будет правильно работать. Однако настоятельно рекомендую вам внимательно прислушиваться к советам `hlint`, особенно к сообщениям об ошибках. И это не только советы в отношении ненужных скобок или избыточной «лямбдности». `hlint` скажет вам и о повторном импортировании одного и того же модуля, и о явном дубляже кода, и о некоторых других проблемах.

Кстати, при написании этой книги `hlint` очень помогла мне. Возьмите и вы за правило периодически обращаться за советами к этому умному консультанту.
